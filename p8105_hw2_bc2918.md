Homework 2
================
Beibei Cao
2020-9-24

This is my solution to Homework 2.

``` r
# load libraries that will be used in this project
library(tidyverse)
library(readxl)
```

## Problem 1

Read the Mr. Trashwheel dataset.

``` r
trashwheel_df = 
  read_xlsx(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx", 
    sheet = "Mr. Trash Wheel",
  range = cell_cols("A:N")) %>% 
  janitor::clean_names() %>% 
  drop_na(dumpster) %>% 
  mutate(
    sports_balls = round(sports_balls),
    sports_balls = as.integer(sports_balls)
  )
```

Read precipitation data\!

``` r
precip_2018 = 
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2018 Precipitation",
    skip = 1
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2018) %>% 
  relocate(year)

precip_2017 = 
  read_excel(
    "./data/Trash-Wheel-Collection-Totals-8-6-19.xlsx",
    sheet = "2017 Precipitation",
    skip = 1
  ) %>% 
  janitor::clean_names() %>% 
  drop_na(month) %>% 
  mutate(year = 2017) %>% 
  relocate(year)
```

Now combine the annual precipitation.

``` r
month_df = 
  tibble(
    month = 1:12,
    month_name = month.name
  )

precip_df = 
  bind_rows(precip_2018, precip_2017)

left_join(precip_df, month_df, by = "month")
```

    ## # A tibble: 24 x 4
    ##     year month total month_name
    ##    <dbl> <dbl> <dbl> <chr>     
    ##  1  2018     1  0.94 January   
    ##  2  2018     2  4.8  February  
    ##  3  2018     3  2.69 March     
    ##  4  2018     4  4.69 April     
    ##  5  2018     5  9.27 May       
    ##  6  2018     6  4.77 June      
    ##  7  2018     7 10.2  July      
    ##  8  2018     8  6.45 August    
    ##  9  2018     9 10.5  September 
    ## 10  2018    10  2.12 October   
    ## # … with 14 more rows

This dataset contains information from the Mr. Trashwheel trash
collector in Baltimore, Maryland. As trash enters the inner harbor, the
trashwheel collects that trash, and stores it in a dumpster. The dataset
contains information on year, month, and trash collected, including some
specific kinds of trash. There are a total of `344` rows in our final
dataset. Additional date sheets include month precipitation data.

## Problem 2

#### This problem focuses on NYC Transit data.

Read and clean the NYC Transit data.

``` r
# read NYC csv
nyctransit_df = 
  read_csv(
    file = "./data/NYC_Transit_Subway_Entrance_And_Exit_Data.csv") %>% 
  janitor::clean_names() 
## Parsed with column specification:
## cols(
##   .default = col_character(),
##   `Station Latitude` = col_double(),
##   `Station Longitude` = col_double(),
##   Route8 = col_double(),
##   Route9 = col_double(),
##   Route10 = col_double(),
##   Route11 = col_double(),
##   ADA = col_logical(),
##   `Free Crossover` = col_logical(),
##   `Entrance Latitude` = col_double(),
##   `Entrance Longitude` = col_double()
## )
## See spec(...) for full column specifications.

# check columns  
colnames(nyctransit_df)
##  [1] "division"           "line"               "station_name"      
##  [4] "station_latitude"   "station_longitude"  "route1"            
##  [7] "route2"             "route3"             "route4"            
## [10] "route5"             "route6"             "route7"            
## [13] "route8"             "route9"             "route10"           
## [16] "route11"            "entrance_type"      "entry"             
## [19] "exit_only"          "vending"            "staffing"          
## [22] "staff_hours"        "ada"                "ada_notes"         
## [25] "free_crossover"     "north_south_street" "east_west_street"  
## [28] "corner"             "entrance_latitude"  "entrance_longitude"
## [31] "station_location"   "entrance_location"

# select wanted columns
nyctransit_df = nyctransit_df[,c(2:18,20,23)]

# preview and check which column with character (YES vs NO)
str(nyctransit_df)
## tibble [1,868 × 19] (S3: tbl_df/tbl/data.frame)
##  $ line             : chr [1:1868] "4 Avenue" "4 Avenue" "4 Avenue" "4 Avenue" ...
##  $ station_name     : chr [1:1868] "25th St" "25th St" "36th St" "36th St" ...
##  $ station_latitude : num [1:1868] 40.7 40.7 40.7 40.7 40.7 ...
##  $ station_longitude: num [1:1868] -74 -74 -74 -74 -74 ...
##  $ route1           : chr [1:1868] "R" "R" "N" "N" ...
##  $ route2           : chr [1:1868] NA NA "R" "R" ...
##  $ route3           : chr [1:1868] NA NA NA NA ...
##  $ route4           : chr [1:1868] NA NA NA NA ...
##  $ route5           : chr [1:1868] NA NA NA NA ...
##  $ route6           : chr [1:1868] NA NA NA NA ...
##  $ route7           : chr [1:1868] NA NA NA NA ...
##  $ route8           : num [1:1868] NA NA NA NA NA NA NA NA NA NA ...
##  $ route9           : num [1:1868] NA NA NA NA NA NA NA NA NA NA ...
##  $ route10          : num [1:1868] NA NA NA NA NA NA NA NA NA NA ...
##  $ route11          : num [1:1868] NA NA NA NA NA NA NA NA NA NA ...
##  $ entrance_type    : chr [1:1868] "Stair" "Stair" "Stair" "Stair" ...
##  $ entry            : chr [1:1868] "YES" "YES" "YES" "YES" ...
##  $ vending          : chr [1:1868] "YES" "YES" "YES" "YES" ...
##  $ ada              : logi [1:1868] FALSE FALSE FALSE FALSE FALSE FALSE ...
  
# convert entry variable (col 17-18, 'entry' and 'vending') from character (YES vs NO) to a logical variable
 for (cl in c(17, 18)){
  nyctransit_df[cl] = 
    ifelse(nyctransit_df[cl] == "YES", TRUE, FALSE)
}

# check result
str(nyctransit_df[17:18])
## tibble [1,868 × 2] (S3: tbl_df/tbl/data.frame)
##  $ entry  : logi [1:1868] TRUE TRUE TRUE TRUE TRUE TRUE ...
##  $ vending: logi [1:1868] TRUE TRUE TRUE TRUE TRUE TRUE ...
```

So far, we load the NYC Transit dataset, cleaned the names of columns,
selected the desired columns and changed two column, `entry` and
`vending`, from `YES/NO` character variables to `TRUE/FALSE` logical
variables. The dataset contained the following `19` variables: `line,
station_name, station_latitude, station_longitude, route1, route2,
route3, route4, route5, route6, route7, route8, route9, route10,
route11, entrance_type, entry, vending, ada`. There are now `1868` rows
in the dataset.
